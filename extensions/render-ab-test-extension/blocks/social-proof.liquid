{% comment %}
  Social Proof Widget
  Displays social proof elements like reviews, testimonials, and trust badges
{% endcomment %}

<div class="ab-optimizer-social-proof" 
     style="
       padding: {{ block.settings.padding }}px;
       background: {{ block.settings.background_color }};
       border-radius: {{ block.settings.border_radius }}px;
       border: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
       margin: {{ block.settings.margin }}px 0;
       text-align: {{ block.settings.text_align }};
     ">

  {% case block.settings.proof_type %}
    {% when 'recent_purchase' %}
      <div class="recent-purchase-notification" style="color: {{ block.settings.text_color }};">
        <span style="font-size: {{ block.settings.icon_size }}px;">üõí</span>
        <span style="font-size: {{ block.settings.font_size }}px; margin-left: 8px;">
          Someone in your area just purchased this 2 minutes ago
        </span>
      </div>

    {% when 'review_count' %}
      <div class="review-count" style="color: {{ block.settings.text_color }};">
        <span style="font-size: {{ block.settings.icon_size }}px;">‚≠ê</span>
        <span style="font-size: {{ block.settings.font_size }}px; margin-left: 8px;">
          1,234 happy customers
        </span>
      </div>

    {% when 'testimonial' %}
      <div class="testimonial" style="color: {{ block.settings.text_color }};">
        <div style="font-style: italic; font-size: {{ block.settings.font_size }}px; margin-bottom: 8px;">
          "This product exceeded my expectations!"
        </div>
        <div style="font-size: {{ block.settings.font_size | minus: 2 }}px; opacity: 0.8;">
          - Sarah M.
        </div>
      </div>

    {% when 'trust_badge' %}
      <div class="trust-badge" style="color: {{ block.settings.text_color }};">
        <span style="font-size: {{ block.settings.icon_size }}px;">üîí</span>
        <span style="font-size: {{ block.settings.font_size }}px; margin-left: 8px;">
          100% Secure Checkout
        </span>
      </div>

    {% when 'stock_warning' %}
      {% if product.available and product.inventory_quantity <= 5 %}
        <div class="stock-warning" style="color: {{ block.settings.text_color }};">
          <span style="font-size: {{ block.settings.icon_size }}px;">‚ö†Ô∏è</span>
          <span style="font-size: {{ block.settings.font_size }}px; margin-left: 8px;">
            Only {{ product.inventory_quantity }} left in stock!
          </span>
        </div>
      {% endif %}

    {% when 'custom' %}
      <div class="custom-proof" style="color: {{ block.settings.text_color }};">
        <span style="font-size: {{ block.settings.icon_size }}px;">‚ú®</span>
        <span style="font-size: {{ block.settings.font_size }}px; margin-left: 8px;">
          {{ block.settings.custom_text | default: 'Custom social proof message' }}
        </span>
      </div>
  {% endcase %}
</div>

{% schema %}
{
  "name": "Social Proof",
  "target": "section",
  "settings": [
    {
      "type": "select",
      "id": "proof_type",
      "label": "Social Proof Type",
      "options": [
        { "value": "recent_purchase", "label": "Recent Purchase" },
        { "value": "review_count", "label": "Review Count" },
        { "value": "testimonial", "label": "Customer Testimonial" },
        { "value": "trust_badge", "label": "Trust Badge" },
        { "value": "stock_warning", "label": "Stock Warning" },
        { "value": "custom", "label": "Custom Message" }
      ],
      "default": "recent_purchase"
    },
    {
      "type": "text",
      "id": "custom_text",
      "label": "Custom Text",
      "default": "Custom social proof message"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#e5e7eb"
    },
    {
      "type": "range",
      "id": "border_width",
      "label": "Border Width",
      "min": 0,
      "max": 5,
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border Radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "default": 8
    },
    {
      "type": "range",
      "id": "padding",
      "label": "Padding",
      "min": 8,
      "max": 32,
      "step": 1,
      "default": 16
    },
    {
      "type": "range",
      "id": "margin",
      "label": "Margin",
      "min": 0,
      "max": 20,
      "step": 1,
      "default": 8
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Font Size",
      "min": 12,
      "max": 24,
      "step": 1,
      "default": 14
    },
    {
      "type": "range",
      "id": "icon_size",
      "label": "Icon Size",
      "min": 12,
      "max": 32,
      "step": 1,
      "default": 16
    },
    {
      "type": "select",
      "id": "text_align",
      "label": "Text Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    }
  ]
}
{% endschema %} 